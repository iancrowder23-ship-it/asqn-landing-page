---
phase: 08-vps-provisioning-and-production-compose
plan: 02
type: execute
wave: 1
depends_on: []
files_modified: []
autonomous: false

must_haves:
  truths:
    - "A private GitHub repository exists containing the full project git history"
    - "The local git repo has a remote named origin pointing to the GitHub repo"
    - "All local commits are pushed to the main branch on GitHub"
  artifacts: []
  key_links:
    - from: "local .git"
      to: "github.com remote"
      via: "git remote origin"
      pattern: "git@github\\.com.*asqn"
---

<objective>
Create a private GitHub repository and push the existing local codebase with full git history. This establishes the remote repository that the CI/CD pipeline (Phase 9) will use as its trigger.

Purpose: The GitHub remote is required for Phase 9's CI/CD pipeline (GitHub Actions) and for cloning the code onto the VPS in Plan 08-03. Without a remote, there is no way to get the code to the VPS or automate deployments.
Output: A private GitHub repo at github.com/USERNAME/asqn-landing-page with full commit history on main branch.
</objective>

<execution_context>
@/home/iancrowder/.claude/get-shit-done/workflows/execute-plan.md
@/home/iancrowder/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-vps-provisioning-and-production-compose/08-RESEARCH.md
</context>

<important_note>
ALL npm/npx commands need `env -u NPM_CONFIG_PREFIX` prefix due to shell issue.

This plan requires the GitHub CLI (`gh`) to be installed and authenticated locally. If the user does not have `gh` authenticated, they can use manual git commands instead.
</important_note>

<tasks>

<task type="auto">
  <name>Task 1: Create GitHub repository and push codebase</name>
  <files></files>
  <action>
First, check if `gh` CLI is available and authenticated:
```bash
gh auth status
```

If `gh` is authenticated, create the repo and push in one command:
```bash
gh repo create asqn-landing-page --private --source=. --remote=origin --push
```

If `gh` is NOT available or not authenticated, fall back to manual approach. Present a checkpoint asking the user to:
1. Create a private repo named `asqn-landing-page` on github.com
2. Provide the repo URL (e.g., `git@github.com:USERNAME/asqn-landing-page.git`)

Then run:
```bash
git remote add origin git@github.com:USERNAME/asqn-landing-page.git
git branch -M main
git push -u origin main
```

After pushing, verify:
```bash
git remote -v
# Should show origin pointing to github.com
git log --oneline -5
# Should match local history
gh repo view --web 2>/dev/null || echo "Open GitHub repo in browser to verify"
```
  </action>
  <verify>
```bash
git remote -v
# Expected: origin git@github.com:USERNAME/asqn-landing-page.git (fetch/push)
git log origin/main --oneline -3
# Expected: shows recent commits matching local
```
  </verify>
  <done>Private GitHub repository exists with all local commits pushed to main branch. Local git remote "origin" is configured.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Verify GitHub repository</name>
  <action>
User verifies the GitHub repository was created correctly:
1. Visit the GitHub repo URL in your browser
2. Confirm the repository is set to **Private**
3. Confirm the commit history is present (should show 80+ commits from v1.0)
4. Confirm `.env` is NOT in the repo (only `.env.example` should be visible)
5. Confirm `Dockerfile`, `docker-compose.yml`, and `.dockerignore` are present

Resume signal: Type "approved" if the repo looks correct, or describe any issues.
  </action>
  <verify>User confirms the repository is private, has full history, and does not contain .env</verify>
  <done>GitHub repository verified as private with complete commit history and no secrets</done>
</task>

</tasks>

<verification>
1. `git remote -v` shows origin pointing to GitHub
2. `git log origin/main --oneline -3` matches local commits
3. `.env` is NOT in the GitHub repository (check via web or `gh api repos/OWNER/REPO/contents/.env` returns 404)
4. Repository visibility is Private
</verification>

<success_criteria>
- INFRA-01: GitHub repository exists with full codebase pushed
- Repository is private (reduces attack surface)
- All v1.0 commit history is preserved
- .env is excluded from the repository
</success_criteria>

<output>
After completion, create `.planning/phases/08-vps-provisioning-and-production-compose/08-02-SUMMARY.md`
</output>
